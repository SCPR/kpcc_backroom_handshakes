{% extends "ballot_box/base.html" %}
{% load humanize %}
{% load ballot_box_template_tags %}

{% block display_block %}

    <!-- i was built at {{ timestamp }} using django-bakery -->

    <div class="hero-election">

        <style type="text/css">
            .row-fluid {
             width: 100%; zoom: 1;
            }

            h1 {
             font-size: 50px; line-height: 62px;
            }

            h1+p {
             color: #444; font-size: 18px; line-height: 1.8em;
            }

            p strong {
             color: #444; font-family: "proxima-nova"; font-size: 18px;
            }

            a.fa {
             font-family: "proxima-nova" !important
            }

            a.fa:before {
             font-family: FontAwesome; margin-right: 6px;
            }

            .row-fluid .span24 {
             margin-left: 0
            }


            @media screen and (max-width: 1060px) {
                .row-fluid {
                 width: 100%
                }
                .row-fluid .span24 {
                 margin-left: 0
                }
            }

            @media screen and (max-width: 800px) {
                h1 {
                 line-height: 55px; font-size: 55px;
                }
                .row-fluid .span24 {
                 margin-left: 0
                }
            }
            @media screen and (max-width: 400px) {
                .row-fluid .span24 {
                 margin-left: 0
                }
                h1 {
                 line-height: 32px; font-size: 32px;
                }
                .hero-election .results .results-block .initiative {
                 float: none !important; width: auto !important;
                }
            }
            .results-collection {
             border-bottom: 1px solid #333
            }
            .results-collection .results-block {
             display: none
            }
            .results-collection.active .results-block {
             display: block
            }
            .results-collection .collection-header {
             background: #000; font-size: 18px; padding: 10px; position: relative; text-transform: uppercase; color: #fff;
            }
            .results-collection .collection-header:after {
             content: ""; display: block; width: 0; height: 0; border-style: solid; border-width: 7px 7.5px 0; border-color: #fff transparent transparent; position: absolute; right: 10px; top: 16px;
            }
            .results-collection.active .collection-header:after {
             width: 0; height: 0; border-style: solid; border-width: 0 7.5px 7px; border-color: transparent transparent #fff;
            }
            .results-collection .collection-header:hover {
             background: #111; color: #CB5F1D; cursor: pointer;
            }
            .hero-election .results .results-block .initiative .result .yes strong {
             white-space: nowrap
            }
            .hero-election .results .results-block .initiative .result .yes strong span {
             color: #fff
            }
            .hero-election .election-header {
             background: #134b94 url('http://162.243.135.6/static/assets/elections-bg-header.jpg') no-repeat 0 0; border-bottom: 1px solid #115695; position: relative; text-align: center;
            }
            .hero-election .results .results-block header {
             background: url('http://162.243.135.6/static/assets/elections-bg-subhead.png') repeat-x 0 0; position: relative;
            }
            .hero-election .results {
             background: #2e2e2e; border-top: 1px solid #414141; color: #fff;
            }
            .results-collection {
             border-bottom: 1px solid #333
            }

        </style>

        <div class="row-fluid">
            <header class="span24 election-header">
                <h1>2016 Primary Election Results</h1>
            </header>
        </div>
        <div class="row-fluid">
            <section class="span24">
                <div class="header-well clearfix">
                    <h2 class="callout center-contents"><a href="http://www.scpr.org/elections/2016/primary">Jump to KPCC&#39;s complete election coverage</a></h2>
                </div>
            </section>
        </div>
        <div class="results">
            <article class="results-block">
                    <div class="results-block">
                        <header>
                            <h2>{{ dem_pres.0.contest.contestname }}</h2>
                        </header>
                        <div class="clearfix">
                            {% for candidate in dem_pres|slice:":2"|dictsortreversed:"votepct" %}
                                <section class="initiative local condensed">
                                    <div class="title">
                                        <h3>{{ candidate.fullname }}</h3>
                                    </div>
                                    <div class="result relative">
                                        <div class="yes "><strong><span>{{ candidate.votepct|percentage|floatformat:1 }}</span><b class="percentage">%</b></strong></div>
                                    </div>
                                </section>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="results-block">
                        <header>
                            <h2>{{ gop_pres.0.contest.contestname }}</h2>
                        </header>
                        <div class="clearfix">
                            {% for candidate in gop_pres|slice:":2"|dictsortreversed:"votepct" %}
                                <section class="initiative local condensed">
                                    <div class="title">
                                        <h3>{{ candidate.fullname }}</h3>
                                    </div>
                                    <div class="result relative">
                                        <div class="yes "><strong><span>{{ candidate.votepct|percentage|floatformat:1 }}</span><b class="percentage">%</b></strong></div>
                                    </div>
                                </section>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="results-block">
                        <header>
                            <h2>{{ senate_primary.0.contest.contestname }}</h2>
                        </header>
                        <div class="clearfix">
                            {% for candidate in senate_primary|slice:":2"|dictsortreversed:"votepct" %}
                                <section class="initiative local condensed">
                                    <div class="title">
                                        <h3>{{ candidate.fullname }}</h3>
                                    </div>
                                    <div class="result relative">
                                        <div class="yes "><strong><span>{{ candidate.votepct|percentage|floatformat:1 }}</span><b class="percentage">%</b></strong></div>
                                    </div>
                                </section>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="results-block">
                        <header>
                            <h2>{{ lac_sup_4.contestname }}</h2>
                        </header>
                        <div class="clearfix">
                            {% for candidate in lac_sup_4.candidate_set.all|slice:":2"|dictsortreversed:"votepct" %}
                                <section class="initiative local condensed">
                                    <div class="title">
                                        <h3>{{ candidate.fullname }}</h3>
                                    </div>
                                    <div class="result relative">
                                        <div class="yes "><strong><span>{{ candidate.votepct|percentage|floatformat:1 }}</span><b class="percentage">%</b></strong></div>
                                    </div>
                                </section>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="results-block">
                        <header>
                            <h2>{{ lac_sup_5.contestname }}</h2>
                        </header>
                        <div class="clearfix">
                            {% for candidate in lac_sup_5.candidate_set.all|slice:":2"|dictsortreversed:"votepct" %}
                                <section class="initiative local condensed">
                                    <div class="title">
                                        <h3>{{ candidate.fullname }}</h3>
                                    </div>
                                    <div class="result relative">
                                        <div class="yes "><strong><span>{{ candidate.votepct|percentage|floatformat:1 }}</span><b class="percentage">%</b></strong></div>
                                    </div>
                                </section>
                            {% endfor %}
                        </div>
                    </div>
            </article>
        </div>
    </div>
{% endblock %}

{% block extra_js %}
    <script type="text/javascript">
        $(document).ready(function(){
            $(".collection-header").click(function() {
                $(this).parent().toggleClass("active");
            });
        });
    </script>
{% endblock %}
